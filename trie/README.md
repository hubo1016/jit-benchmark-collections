# Trie benchmark

This benchmark creates a trie from a input dictionary, and checks existence
from another list.

`inserts2.txt` and `searches2.txt` are used for input. They are generated by:

1. Generate 100000 words with only lower-case letters with 5-20 characters
2. Randomly pick 50000 words from the whole list twice to form `inserts.txt` and `searches.txt`
3. Mix two chinese words to test unicode ability

Notice there is a small difference for different languages: C++/PHP use UTF-8 bytes, and other languages
use unicode string, so the generated trie is a little different for chinese words.

### Version differences

1. Python
    - trie.py: Implement with list and dict
    - trie2.py: Implement with dict
    - trie3.py: Implement with class
    - trie4.py: Implement with class with dynamic attribute

2. JavaScript(ES6+)
    - trie.js: Implement with array and object
    - trie2.js: Implement with object
    - trie3.js: Implement with object and Map
    - trie4.js: Implement with ES6 class
    - trie5.js: Implement with ES6 class with dynamic attribute

3. PHP
    - trie.php: Implement with array (number indexed) and array (string indexed)
    - trie2.php: Implement with string indexed array
    - trie3.php: Implement with class
    - trie4.php: Implement with class with dynamic attribute

4. C++
    - trie.cpp: Implement with class and STL unordered_map (string indexed)
    - trie.cpp: Implement with class and STL unordered_map (char indexed)
    - trie.cpp: Implement with class and pair vector (string indexed)

### Reference result

Tested on a virtual machine with docker images, CPU: E5-2630 v4 @ 2.20GHz

|   Language    |   Script  |   Real Time   |   User Time   |   System Time     |
|:--------------|:---------:|:-------------:|:-------------:|:-----------------:|
| Node.js       | trie.js   |    6.5s       |       6.6s    |       0.6s        |
| Node.js       | trie2.js  |    6.0s       |       6.0s    |       0.6s        |
| Node.js       | trie3.js  |    11.7s      |       17.3s   |       2.3s        |
| Node.js       | trie4.js  |    7.7s       |       11.7s   |       0.9s        |
| Node.js       | trie5.js  |    7.5s       |       11.5s   |       0.9s        |
| PyPy 3.7      | trie.py   |    17.3s      |       14.0s   |       1.3s        |
| PyPy 3.7      | trie2.py  |    22.2s      |       19.9s   |       2.3s        |
| PyPy 3.7      | trie3.py  |    14.6s      |       13.2s   |       1.4s        |
| PyPy 3.7      | trie4.py  |    13.5s      |       12.2s   |       1.4s        |
| PHP8 (JIT)    | trie.php  |    25.5s      |       24.5s   |       0.1s        |
| PHP8 (JIT)    | trie2.php |    27.0s      |       26.9s   |       0.1s        |
| PHP8 (JIT)    | trie3.php |    17.9s      |       17.9s   |       0.1s        |
| PHP8 (JIT)    | trie4.php |    17.4s      |       17.4s   |       0.1s        |
| Python 3.9    | trie.py   |    33.6s      |       31.6s   |       1.5s        |
| Python 3.9    | trie2.py  |    41.1s      |       38.8s   |       2.4s        |
| Python 3.9    | trie3.py  |    48.6s      |       46.7s   |       2.0s        |
| Python 3.9    | trie4.py  |    49.9s      |       48.1s   |       1.8s        |
| PHP8 (no JIT) | trie.php  |    25.3s      |       25.2s   |       0.1s        |
| PHP8 (no JIT) | trie2.php |    28.3s      |       28.3s   |       0.1s        |
| PHP8 (no JIT) | trie3.php |    18.9s      |       18.9s   |       0.1s        |
| PHP8 (no JIT) | trie4.php |    19.4s      |       19.4s   |       0.1s        |
| PHP7.4.12     | trie.php  |    28.6s      |       25.9s   |       0.1s        |
| PHP7.4.12     | trie2.php |    29.8s      |       29.7s   |       0.1s        |
| PHP7.4.12     | trie3.php |    19.4s      |       19.3s   |       0.1s        |
| PHP7.4.12     | trie4.php |    18.9s      |       18.8s   |       0.1s        |
| g++ 9.3       | trie.cpp  |    15.5s      |       15.5s   |       0.0s        |
| g++ 9.3       | trie2.cpp |    14.1s      |       14.0s   |       0.0s        |
| g++ 9.3       | trie3.cpp |    4.9s       |       4.9s    |       0.0s        |
